{"ast":null,"code":"import _classCallCheck from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Button,Card}from\"react-bootstrap\";import React,{Component}from\"react\";import TextField from\"@material-ui/core/TextField\";import ChatServices from\"../services/ChatServices\";// import { Card } from \"material-ui\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatUI=/*#__PURE__*/function(_Component){_inherits(ChatUI,_Component);var _super=_createSuper(ChatUI);function ChatUI(props){var _this;_classCallCheck(this,ChatUI);_this=_super.call(this,props);_this.showUserChat=function(chatUser){var name=chatUser.firstName+\" \"+chatUser.lastName;var id=chatUser.id;_this.setState({otherUserName:name},function(){console.log(_this.state.otherUserName);// show name on chat panel\ndocument.getElementById(\"otherUserName\").innerHTML=name;// set msgtosend object user id\n_this.setState({messageobj:{toUserId:id}},function(){console.log(_this.state.messageobj);});// send get\nChatServices.getChats(chatUser.id).then(function(res){_this.setState({chatMessages:res.data},console.log(res.data[0].fromUser.id));}).then(function(){console.log(_this.state.chatMessages);console.log(_this.state.chatMessages[0].fromUser.id);});console.log(\"curr user -> \"+_this.state.currUserId);});// this.setState({\n//   chatMessages: [\n//     {\n//       fromUser: \"3\",\n//       toUser: \"4\",\n//       message: \"namaste\",\n//       msgTimestamp: \"1\",\n//     },\n//     {\n//       fromUser: \"4\",\n//       toUser: \"3\",\n//       message: \"namaskar\",\n//       msgTimestamp: \"2\",\n//     },\n//     {\n//       fromUser: \"5\",\n//       toUser: \"3\",\n//       message: \"pranam\",\n//       msgTimestamp: \"2\",\n//     },\n//   ],\n// });\n};_this.handleChange=function(value){_this.setState(function(){return{messageobj:{message:value}};});};_this.handleClose=function(){_this.setState({open:false});};_this.sendMsg=function(e){e.preventDefault();if(_this.state.messageobj.message===\"\"){return;}var messageobj={toUserId:_this.state.messageobj.toUserId,message:_this.state.messageobj.message};console.log(_this.state.messageobj);console.log(messageobj);ChatServices.sendMessage(messageobj).then(function(res){console.log(res);_this.handleClose();});};_this.state={currUserId:_this.props.match.params.id,otherUserid:\"\",otherUserName:\"\",messageobj:{toUserId:\"\",message:\"\"},chatUsers:[{id:\"1\",firstName:\"Johnny\",lastName:\"Depp\",email:\"j@d.com\",password:\"123\",gender:\"male\",dob:\"22/11/1997\",description:\"iiitb\"// photoPath: \"\",\n},{id:\"2\",firstName:\"Leonardo\",lastName:\"Dicaprio\",email:\"l@d.com\",password:\"123\",gender:\"male\",dob:\"12/34/1975\",description:\"iiitb\"// photoPath: \"\",\n},{id:\"4\",firstName:\"Dwight\",lastName:\"Shrute\",email:\"j@d.com\",password:\"123\",gender:\"male\",dob:\"22/11/1997\",description:\"iiitb\"// photoPath: \"\",\n}],chatMessages:[]// chatMessages: [\n//   {\n//     fromUser: \"4\",\n//     toUser: \"3\",\n//     message: \"Hey!\",\n//     msgTimestamp: \"1\",\n//   },\n//   {\n//     fromUser: \"3\",\n//     toUser: \"4\",\n//     message: \"Hi!\",\n//     msgTimestamp: \"2\",\n//   },\n// ],\n};_this.showUserChat=_this.showUserChat.bind(_assertThisInitialized(_this));return _this;}_createClass(ChatUI,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;ChatServices.getChatUsers().then(function(res){console.log(res.data);_this2.setState({chatUsers:res.data,isDemoChat:false});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,chatUsers=_this$state.chatUsers,chatMessages=_this$state.chatMessages;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row gutters-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"My Messages\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary mb-4 \",children:[\"People who tried to contact you-\",\" \"]})]})}),chatUsers.map(function(chatUser){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:/*#__PURE__*/_jsxs(\"i\",{className:\"material-icons text-info mr-2\",children:[chatUser.firstName,\" \",chatUser.lastName]})})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:function onClick(){_this3.showUserChat(chatUser);},children:\"Messages\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]},chatUser.id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",id:\"chatsdisplay\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons text-info mr-2\",id:\"otherUserName\",children:\"Please select a user to see messages.\"})})})}),chatMessages.map(function(chatMessage){return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(\"fromUserId\"+chatMessage.fromUser.id),console.log(\"currUser\"+_this3.state.currUserId),_this3.state.currUserId===chatMessage.fromUser.id?/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:\" \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 text-right\",children:[/*#__PURE__*/_jsx(Card,{bg:\"info\",text:\"light\",children:/*#__PURE__*/_jsx(Card.Body,{children:chatMessage.message})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0 col-sm text-secondary\",children:[\"You\",\" \"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 text-left\",children:[/*#__PURE__*/_jsx(Card,{bg:\"primary\",text:\"light\",children:/*#__PURE__*/_jsx(Card.Body,{children:chatMessage.message})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0 col-sm text-secondary\",children:[\"User\",\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-right\"})]})]},chatMessage.msgTimestamp);}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"outlined-multiline-static\",placeholder:\"Message \",label:\"Write a message here\",multiline:true,rows:1,variant:\"outlined\",fullWidth:true,onChange:function onChange(event){return _this3.handleChange(event.target.value);},name:\"message\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:this.sendMsg,children:\"Send\"})})]})})})]})})})});}}]);return ChatUI;}(Component);export default ChatUI;","map":{"version":3,"sources":["/home/nayanchaturvedi/Documents/tripshare/src/components/ChatUI.js"],"names":["Button","Card","React","Component","TextField","ChatServices","ChatUI","props","showUserChat","chatUser","name","firstName","lastName","id","setState","otherUserName","console","log","state","document","getElementById","innerHTML","messageobj","toUserId","getChats","then","res","chatMessages","data","fromUser","currUserId","handleChange","value","message","handleClose","open","sendMsg","e","preventDefault","sendMessage","match","params","otherUserid","chatUsers","email","password","gender","dob","description","bind","getChatUsers","isDemoChat","map","chatMessage","msgTimestamp","event","target"],"mappings":"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","sourcesContent":["import { Button, Card } from \"react-bootstrap\";\nimport React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ChatServices from \"../services/ChatServices\";\n// import { Card } from \"material-ui\";\n\nclass ChatUI extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currUserId: this.props.match.params.id,\n      otherUserid: \"\",\n      otherUserName: \"\",\n      messageobj: {\n        toUserId: \"\",\n        message: \"\",\n      },\n      chatUsers: [\n        {\n          id: \"1\",\n          firstName: \"Johnny\",\n          lastName: \"Depp\",\n          email: \"j@d.com\",\n          password: \"123\",\n          gender: \"male\",\n          dob: \"22/11/1997\",\n          description: \"iiitb\",\n          // photoPath: \"\",\n        },\n        {\n          id: \"2\",\n          firstName: \"Leonardo\",\n          lastName: \"Dicaprio\",\n          email: \"l@d.com\",\n          password: \"123\",\n          gender: \"male\",\n          dob: \"12/34/1975\",\n          description: \"iiitb\",\n          // photoPath: \"\",\n        },\n        {\n          id: \"4\",\n          firstName: \"Dwight\",\n          lastName: \"Shrute\",\n          email: \"j@d.com\",\n          password: \"123\",\n          gender: \"male\",\n          dob: \"22/11/1997\",\n          description: \"iiitb\",\n          // photoPath: \"\",\n        },\n      ],\n      chatMessages: [],\n      // chatMessages: [\n      //   {\n      //     fromUser: \"4\",\n      //     toUser: \"3\",\n      //     message: \"Hey!\",\n      //     msgTimestamp: \"1\",\n      //   },\n      //   {\n      //     fromUser: \"3\",\n      //     toUser: \"4\",\n      //     message: \"Hi!\",\n      //     msgTimestamp: \"2\",\n      //   },\n      // ],\n    };\n    this.showUserChat = this.showUserChat.bind(this);\n  }\n\n  componentDidMount() {\n    ChatServices.getChatUsers().then((res) => {\n      console.log(res.data);\n      this.setState({\n        chatUsers: res.data,\n        isDemoChat: false,\n      });\n    });\n  }\n\n  showUserChat = (chatUser) => {\n    var name = chatUser.firstName + \" \" + chatUser.lastName;\n    var id = chatUser.id;\n    this.setState({ otherUserName: name }, () => {\n      console.log(this.state.otherUserName);\n      // show name on chat panel\n      document.getElementById(\"otherUserName\").innerHTML = name;\n      // set msgtosend object user id\n      this.setState(\n        {\n          messageobj: {\n            toUserId: id,\n          },\n        },\n        () => {\n          console.log(this.state.messageobj);\n        }\n      );\n      // send get\n      ChatServices.getChats(chatUser.id)\n        .then((res) => {\n          this.setState(\n            {\n              chatMessages: res.data,\n            },\n            console.log(res.data[0].fromUser.id)\n          );\n        })\n        .then(() => {\n          console.log(this.state.chatMessages);\n          console.log(this.state.chatMessages[0].fromUser.id);\n        });\n      console.log(\"curr user -> \" + this.state.currUserId);\n    });\n    // this.setState({\n    //   chatMessages: [\n    //     {\n    //       fromUser: \"3\",\n    //       toUser: \"4\",\n    //       message: \"namaste\",\n    //       msgTimestamp: \"1\",\n    //     },\n    //     {\n    //       fromUser: \"4\",\n    //       toUser: \"3\",\n    //       message: \"namaskar\",\n    //       msgTimestamp: \"2\",\n    //     },\n    //     {\n    //       fromUser: \"5\",\n    //       toUser: \"3\",\n    //       message: \"pranam\",\n    //       msgTimestamp: \"2\",\n    //     },\n    //   ],\n    // });\n  };\n\n  handleChange = (value) => {\n    this.setState(() => ({\n      messageobj: {\n        message: value,\n      },\n    }));\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  sendMsg = (e) => {\n    e.preventDefault();\n    if (this.state.messageobj.message === \"\") {\n      return;\n    }\n    let messageobj = {\n      toUserId: this.state.messageobj.toUserId,\n      message: this.state.messageobj.message,\n    };\n    console.log(this.state.messageobj);\n    console.log(messageobj);\n    ChatServices.sendMessage(messageobj).then((res) => {\n      console.log(res);\n      this.handleClose();\n    });\n  };\n\n  render() {\n    const { chatUsers, chatMessages } = this.state;\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"main-body\">\n            <div className=\"row gutters-sm\">\n              <div className=\"col-md-5 mb-3\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <div className=\"d-flex flex-column align-items-center text-center\">\n                      <div className=\"mt-3\">\n                        <h4 className=\"mb-4\">My Messages</h4>\n                        <p className=\"text-secondary mb-4 \">\n                          People who tried to contact you-{\" \"}\n                        </p>\n                      </div>\n                    </div>\n                    {chatUsers.map((chatUser) => (\n                      <div key={chatUser.id}>\n                        <div className=\"row\">\n                          <div className=\"col-sm-8\">\n                            <h6 className=\"mb-0\">\n                              <i className=\"material-icons text-info mr-2\">\n                                {chatUser.firstName} {chatUser.lastName}\n                              </i>\n                            </h6>\n                          </div>\n                          <Button\n                            variant=\"primary\"\n                            size=\"sm\"\n                            onClick={() => {\n                              this.showUserChat(chatUser);\n                            }}\n                          >\n                            Messages\n                          </Button>\n                        </div>\n                        <hr></hr>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"col-md-7\">\n                <div className=\"card mb-6\">\n                  <div className=\"card-body\" id=\"chatsdisplay\">\n                    <div className=\"row\">\n                      <div className=\"col-lg-8\">\n                        <h5 className=\"mb-4\">\n                          <i\n                            className=\"material-icons text-info mr-2\"\n                            id=\"otherUserName\"\n                          >\n                            Please select a user to see messages.\n                          </i>\n                        </h5>\n                      </div>\n                    </div>\n                    {chatMessages.map((chatMessage) => (\n                      <div key={chatMessage.msgTimestamp}>\n                        {console.log(\"fromUserId\" + chatMessage.fromUser.id)}\n                        {console.log(\"currUser\" + this.state.currUserId)}\n                        {this.state.currUserId === chatMessage.fromUser.id ? (\n                          <div className=\"row\">\n                            {\" \"}\n                            <div className=\"col-6\"> </div>\n                            <div className=\"col-6 text-right\">\n                              <Card bg=\"info\" text=\"light\">\n                                <Card.Body>{chatMessage.message}</Card.Body>\n                              </Card>\n                              <h6 className=\"mb-0 col-sm text-secondary\">\n                                You{\" \"}\n                              </h6>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"row\">\n                            {\" \"}\n                            <div className=\"col-6 text-left\">\n                              <Card bg=\"primary\" text=\"light\">\n                                <Card.Body>{chatMessage.message}</Card.Body>\n                              </Card>\n                              <h6 className=\"mb-0 col-sm text-secondary\">\n                                User{\" \"}\n                              </h6>\n                            </div>\n                            <div className=\"col-6 text-right\"></div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                    <hr></hr>\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <TextField\n                          autoFocus\n                          margin=\"dense\"\n                          id=\"outlined-multiline-static\"\n                          placeholder=\"Message \"\n                          label=\"Write a message here\"\n                          multiline\n                          rows={1}\n                          variant=\"outlined\"\n                          fullWidth\n                          onChange={(event) =>\n                            this.handleChange(event.target.value)\n                          }\n                          name=\"message\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <Button\n                        variant=\"primary\"\n                        size=\"sm\"\n                        onClick={this.sendMsg}\n                      >\n                        Send\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ChatUI;\n"]},"metadata":{},"sourceType":"module"}