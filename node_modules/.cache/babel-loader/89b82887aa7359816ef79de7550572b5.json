{"ast":null,"code":"import _classCallCheck from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nayanchaturvedi/Documents/tripshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Button,Card}from\"react-bootstrap\";import React,{Component}from\"react\";import TextField from\"@material-ui/core/TextField\";import ChatServices from\"../services/ChatServices\";import\"../assets/css/Style.css\";// import { Card } from \"material-ui\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatUI=/*#__PURE__*/function(_Component){_inherits(ChatUI,_Component);var _super=_createSuper(ChatUI);function ChatUI(props){var _this;_classCallCheck(this,ChatUI);_this=_super.call(this,props);_this.refreshChat=function(){ChatServices.getChats(_this.state.currChatUser.id).then(function(res){_this.setState({chatMessages:res.data},console.log(res.data[0].fromUser.id));});console.log(\"curr user -> \"+_this.state.currUserId);};_this.showUserChat=function(chatUser){var name=chatUser.firstName+\" \"+chatUser.lastName;var id=chatUser.id;// show name on chat panel\ndocument.getElementById(\"otherUserName\").innerHTML=name;// set msgtosend object user id\n_this.setState({messageobj:{toUserId:id,message:\"\"},currChatUser:{id:id,name:name}},function(){console.log(_this.state.messageobj);console.log(_this.state.currChatUser);},// send get\nChatServices.getChats(chatUser.id).then(function(res){_this.setState({chatMessages:res.data},console.log(res.data[0].fromUser.id));}).then(function(){console.log(_this.state.chatMessages);console.log(_this.state.chatMessages[0].fromUser.id);}));console.log(\"curr user -> \"+_this.state.currUserId);};_this.handleChange=function(value){_this.setState(function(){return{messageobj:{toUserId:_this.state.messageobj.toUserId,message:value}};});};_this.handleClose=function(){_this.setState({open:false});};_this.sendMsg=function(e){e.preventDefault();if(_this.state.messageobj.message===\"\"){return;}var messageobj={toUserId:_this.state.messageobj.toUserId,message:_this.state.messageobj.message};console.log(_this.state.messageobj);ChatServices.sendMessage(_this.state.messageobj).then(function(res){console.log(res);document.getElementById(\"chatBox\").value=\"\";_this.refreshChat();});};_this.state={currUserId:_this.props.match.params.id,currChatUser:{id:\"\",name:\"\"},messageobj:{toUserId:\"\",message:\"\"},chatUsers:[// {\n//   id: \"1\",\n//   firstName: \"Johnny\",\n//   lastName: \"Depp\",\n//   email: \"j@d.com\",\n//   password: \"123\",\n//   gender: \"male\",\n//   dob: \"22/11/1997\",\n//   description: \"iiitb\",\n//   // photoPath: \"\",\n// },\n// {\n//   id: \"2\",\n//   firstName: \"Leonardo\",\n//   lastName: \"Dicaprio\",\n//   email: \"l@d.com\",\n//   password: \"123\",\n//   gender: \"male\",\n//   dob: \"12/34/1975\",\n//   description: \"iiitb\",\n//   // photoPath: \"\",\n// },\n// {\n//   id: \"4\",\n//   firstName: \"Dwight\",\n//   lastName: \"Shrute\",\n//   email: \"j@d.com\",\n//   password: \"123\",\n//   gender: \"male\",\n//   dob: \"22/11/1997\",\n//   description: \"iiitb\",\n//   // photoPath: \"\",\n// },\n],chatMessages:[]// chatMessages: [\n//   {\n//     fromUser: \"4\",\n//     toUser: \"3\",\n//     message: \"Hey!\",\n//     msgTimestamp: \"1\",\n//   },\n//   {\n//     fromUser: \"3\",\n//     toUser: \"4\",\n//     message: \"Hi!\",\n//     msgTimestamp: \"2\",\n//   },\n// ],\n};_this.showUserChat=_this.showUserChat.bind(_assertThisInitialized(_this));return _this;}_createClass(ChatUI,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;ChatServices.getChatUsers().then(function(res){console.log(res.data);_this2.setState({chatUsers:res.data,isDemoChat:false});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,chatUsers=_this$state.chatUsers,chatMessages=_this$state.chatMessages;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row gutters-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"My Messages\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-secondary mb-4 \",children:[\"People who tried to contact you-\",\" \"]})]})}),chatUsers.map(function(chatUser){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:/*#__PURE__*/_jsxs(\"i\",{className:\"material-icons text-info mr-2\",children:[chatUser.firstName,\" \",chatUser.lastName]})})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:function onClick(){_this3.showUserChat(chatUser);},children:\"Messages\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]},chatUser.id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat col-md-7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",id:\"chatsdisplay\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"material-icons text-info mr-2\",id:\"otherUserName\",children:\"Please select a user to see messages.\"})})})}),chatMessages.map(function(chatMessage){return/*#__PURE__*/_jsx(\"div\",{children:_this3.state.currUserId===chatMessage.fromUser.id?/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:\" \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 text-right\",children:[/*#__PURE__*/_jsx(Card,{bg:\"info\",text:\"light\",children:/*#__PURE__*/_jsx(Card.Body,{children:chatMessage.message})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0 col-sm text-secondary\",children:[\"You\",\" \"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 text-left\",children:[/*#__PURE__*/_jsx(Card,{bg:\"primary\",text:\"light\",children:/*#__PURE__*/_jsx(Card.Body,{children:chatMessage.message})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0 col-sm text-secondary\",children:[\"User\",\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-right\"})]})},chatMessage.msgTimestamp);}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",id:\"chatBox\",placeholder:\"Message \",label:\"Write a message here\",multiline:true,rows:1,variant:\"outlined\",fullWidth:true,onChange:function onChange(event){return _this3.handleChange(event.target.value);},name:\"message\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:this.sendMsg,children:\"Send\"})})]})})})]})})})});}}]);return ChatUI;}(Component);export default ChatUI;","map":{"version":3,"sources":["/home/nayanchaturvedi/Documents/tripshare/src/components/ChatUI.js"],"names":["Button","Card","React","Component","TextField","ChatServices","ChatUI","props","refreshChat","getChats","state","currChatUser","id","then","res","setState","chatMessages","data","console","log","fromUser","currUserId","showUserChat","chatUser","name","firstName","lastName","document","getElementById","innerHTML","messageobj","toUserId","message","handleChange","value","handleClose","open","sendMsg","e","preventDefault","sendMessage","match","params","chatUsers","bind","getChatUsers","isDemoChat","map","chatMessage","msgTimestamp","event","target"],"mappings":"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","sourcesContent":["import { Button, Card } from \"react-bootstrap\";\nimport React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ChatServices from \"../services/ChatServices\";\nimport \"../assets/css/Style.css\";\n// import { Card } from \"material-ui\";\n\nclass ChatUI extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currUserId: this.props.match.params.id,\n      currChatUser: {\n        id: \"\",\n        name: \"\",\n      },\n      messageobj: {\n        toUserId: \"\",\n        message: \"\",\n      },\n      chatUsers: [\n        // {\n        //   id: \"1\",\n        //   firstName: \"Johnny\",\n        //   lastName: \"Depp\",\n        //   email: \"j@d.com\",\n        //   password: \"123\",\n        //   gender: \"male\",\n        //   dob: \"22/11/1997\",\n        //   description: \"iiitb\",\n        //   // photoPath: \"\",\n        // },\n        // {\n        //   id: \"2\",\n        //   firstName: \"Leonardo\",\n        //   lastName: \"Dicaprio\",\n        //   email: \"l@d.com\",\n        //   password: \"123\",\n        //   gender: \"male\",\n        //   dob: \"12/34/1975\",\n        //   description: \"iiitb\",\n        //   // photoPath: \"\",\n        // },\n        // {\n        //   id: \"4\",\n        //   firstName: \"Dwight\",\n        //   lastName: \"Shrute\",\n        //   email: \"j@d.com\",\n        //   password: \"123\",\n        //   gender: \"male\",\n        //   dob: \"22/11/1997\",\n        //   description: \"iiitb\",\n        //   // photoPath: \"\",\n        // },\n      ],\n      chatMessages: [],\n      // chatMessages: [\n      //   {\n      //     fromUser: \"4\",\n      //     toUser: \"3\",\n      //     message: \"Hey!\",\n      //     msgTimestamp: \"1\",\n      //   },\n      //   {\n      //     fromUser: \"3\",\n      //     toUser: \"4\",\n      //     message: \"Hi!\",\n      //     msgTimestamp: \"2\",\n      //   },\n      // ],\n    };\n    this.showUserChat = this.showUserChat.bind(this);\n  }\n\n  componentDidMount() {\n    ChatServices.getChatUsers().then((res) => {\n      console.log(res.data);\n      this.setState({\n        chatUsers: res.data,\n        isDemoChat: false,\n      });\n    });\n  }\n\n  refreshChat = () => {\n    ChatServices.getChats(this.state.currChatUser.id).then((res) => {\n      this.setState(\n        {\n          chatMessages: res.data,\n        },\n        console.log(res.data[0].fromUser.id)\n      );\n    });\n    console.log(\"curr user -> \" + this.state.currUserId);\n  };\n\n  showUserChat = (chatUser) => {\n    var name = chatUser.firstName + \" \" + chatUser.lastName;\n    var id = chatUser.id;\n    // show name on chat panel\n    document.getElementById(\"otherUserName\").innerHTML = name;\n\n    // set msgtosend object user id\n    this.setState(\n      {\n        messageobj: {\n          toUserId: id,\n          message: \"\",\n        },\n        currChatUser: {\n          id: id,\n          name: name,\n        },\n      },\n      () => {\n        console.log(this.state.messageobj);\n        console.log(this.state.currChatUser);\n      },\n      // send get\n      ChatServices.getChats(chatUser.id)\n        .then((res) => {\n          this.setState(\n            {\n              chatMessages: res.data,\n            },\n            console.log(res.data[0].fromUser.id)\n          );\n        })\n        .then(() => {\n          console.log(this.state.chatMessages);\n          console.log(this.state.chatMessages[0].fromUser.id);\n        })\n    );\n    console.log(\"curr user -> \" + this.state.currUserId);\n  };\n\n  handleChange = (value) => {\n    this.setState(() => ({\n      messageobj: {\n        toUserId: this.state.messageobj.toUserId,\n        message: value,\n      },\n    }));\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  sendMsg = (e) => {\n    e.preventDefault();\n    if (this.state.messageobj.message === \"\") {\n      return;\n    }\n    let messageobj = {\n      toUserId: this.state.messageobj.toUserId,\n      message: this.state.messageobj.message,\n    };\n    console.log(this.state.messageobj);\n    ChatServices.sendMessage(this.state.messageobj).then((res) => {\n      console.log(res);\n      document.getElementById(\"chatBox\").value = \"\";\n      this.refreshChat();\n    });\n  };\n\n  render() {\n    const { chatUsers, chatMessages } = this.state;\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"main-body\">\n            <div className=\"row gutters-sm\">\n              <div className=\"col-md-5 mb-3\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <div className=\"d-flex flex-column align-items-center text-center\">\n                      <div className=\"mt-3\">\n                        <h4 className=\"mb-4\">My Messages</h4>\n                        <p className=\"text-secondary mb-4 \">\n                          People who tried to contact you-{\" \"}\n                        </p>\n                      </div>\n                    </div>\n                    {chatUsers.map((chatUser) => (\n                      <div key={chatUser.id}>\n                        <div className=\"row\">\n                          <div className=\"col-sm-8\">\n                            <h6 className=\"mb-0\">\n                              <i className=\"material-icons text-info mr-2\">\n                                {chatUser.firstName} {chatUser.lastName}\n                              </i>\n                            </h6>\n                          </div>\n                          <Button\n                            variant=\"primary\"\n                            size=\"sm\"\n                            onClick={() => {\n                              this.showUserChat(chatUser);\n                            }}\n                          >\n                            Messages\n                          </Button>\n                        </div>\n                        <hr></hr>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"chat col-md-7\">\n                <div className=\"card mb-6\">\n                  <div className=\"card-body\" id=\"chatsdisplay\">\n                    <div className=\"row\">\n                      <div className=\"col-lg-8\">\n                        <h5 className=\"mb-4\">\n                          <i\n                            className=\"material-icons text-info mr-2\"\n                            id=\"otherUserName\"\n                          >\n                            Please select a user to see messages.\n                          </i>\n                        </h5>\n                      </div>\n                    </div>\n                    {chatMessages.map((chatMessage) => (\n                      <div key={chatMessage.msgTimestamp}>\n                        {this.state.currUserId === chatMessage.fromUser.id ? (\n                          <div className=\"row\">\n                            {\" \"}\n                            <div className=\"col-6\"> </div>\n                            <div className=\"col-6 text-right\">\n                              <Card bg=\"info\" text=\"light\">\n                                <Card.Body>{chatMessage.message}</Card.Body>\n                              </Card>\n                              <h6 className=\"mb-0 col-sm text-secondary\">\n                                You{\" \"}\n                              </h6>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"row\">\n                            {\" \"}\n                            <div className=\"col-6 text-left\">\n                              <Card bg=\"primary\" text=\"light\">\n                                <Card.Body>{chatMessage.message}</Card.Body>\n                              </Card>\n                              <h6 className=\"mb-0 col-sm text-secondary\">\n                                User{\" \"}\n                              </h6>\n                            </div>\n                            <div className=\"col-6 text-right\"></div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                    <hr></hr>\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <TextField\n                          autoFocus\n                          margin=\"dense\"\n                          id=\"chatBox\"\n                          placeholder=\"Message \"\n                          label=\"Write a message here\"\n                          multiline\n                          rows={1}\n                          variant=\"outlined\"\n                          fullWidth\n                          onChange={(event) =>\n                            this.handleChange(event.target.value)\n                          }\n                          name=\"message\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <Button\n                        variant=\"primary\"\n                        size=\"sm\"\n                        onClick={this.sendMsg}\n                      >\n                        Send\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ChatUI;\n"]},"metadata":{},"sourceType":"module"}