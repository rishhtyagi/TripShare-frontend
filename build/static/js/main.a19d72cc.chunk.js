(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{121:function(e,t,s){},148:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(18),r=s.n(n),i=(s(87),s(121),s(187)),o=s(183),l=s(101),d=s(31),j=s(23),h=s(10),b=s(11),m=s(15),u=s(14),x=s(57),p=s(199),O=s(203),g=s(21),f=s.p+"static/media/logosm.ff9e6e34.png",v=(s(62),s(22)),N="LOGIN_REQUEST",y="LOGOUT_REQUEST",C="SUCCESS",w="FAILURE",k=s(25),S=s.n(k),T=function(e){return{type:C,payload:e}},I=function(){return{type:w,payload:!1}},U=s(1),P=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(h.a)(this,s);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).logout=function(){e.props.logoutUser()},e}return Object(b.a)(s,[{key:"render",value:function(){var e=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:"mr-auto"}),Object(U.jsxs)(p.a,{className:"navbar-right",children:[Object(U.jsx)(d.b,{to:"aboutUs",className:"nav-link",children:"About Us"}),Object(U.jsxs)(d.b,{to:"register",className:"nav-link",children:[Object(U.jsx)(g.a,{icon:v.h})," Register"]}),Object(U.jsxs)(d.b,{to:"login",className:"nav-link",children:[Object(U.jsx)(g.a,{icon:v.d})," Login"]})]})]}),t=Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(p.a,{className:"mr-auto",children:[Object(U.jsx)(d.b,{to:"../dashboard",className:"nav-link",children:"My Profile"}),Object(U.jsx)(d.b,{to:"../createtrip",className:"nav-link",children:"Trip Preferences"}),Object(U.jsx)(d.b,{to:"../myTrips",className:"nav-link",children:"Trip List"}),Object(U.jsx)(d.b,{to:"../aboutUs",className:"nav-link",children:"About Us"})]}),Object(U.jsx)(p.a,{className:"navbar-right",children:Object(U.jsxs)(d.b,{to:"login",className:"nav-link",onClick:this.logout,children:[Object(U.jsx)(g.a,{icon:v.e})," Logout"]})})]});return Object(U.jsxs)(O.a,{bg:"dark",variant:"dark",sticky:"top",className:"py-2",children:[Object(U.jsx)(d.b,{to:"",className:"navbar-brand",children:Object(U.jsxs)("h3",{children:[Object(U.jsx)("img",{src:f,width:"40",height:"40",alt:"brand"})," TRIP SHARE"]})}),this.props.auth.isLoggedIn?t:e]})}}]),s}(a.Component),D=Object(x.b)((function(e){return{auth:e.auth}}),(function(e){return{logoutUser:function(){return e((function(e){e({type:y}),localStorage.removeItem("jwtToken"),localStorage.removeItem("newtripId"),e(T(!1))}))}}}))(P),L=s(200),M=(s(69),s.p+"static/media/slide1.9347b49e.jpg"),G=s.p+"static/media/slide2.1ceb5640.jpg",z=s.p+"static/media/slide3.ff598f3e.jpg",B=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"componentDidMount",value:function(){localStorage.removeItem("newtripId"),localStorage.removeItem("jwtToken")}},{key:"render",value:function(){return Object(U.jsxs)("div",{className:"mt-2",children:[Object(U.jsx)("div",{children:Object(U.jsxs)(L.a,{children:[Object(U.jsxs)(L.a.Item,{children:[Object(U.jsx)("img",{className:"image d-block w-100",src:M,alt:"First slide"}),Object(U.jsx)(L.a.Caption,{children:Object(U.jsx)("h3",{className:"caption",children:"Hit the Road"})})]}),Object(U.jsxs)(L.a.Item,{children:[Object(U.jsx)("img",{className:"image d-block w-100",src:G,alt:"Third slide"}),Object(U.jsx)(L.a.Caption,{children:Object(U.jsx)("h3",{className:"caption",style:{color:"black"},children:"Walk through nature"})})]}),Object(U.jsxs)(L.a.Item,{children:[Object(U.jsx)("img",{className:"image d-block w-100",src:z,alt:"Third slide"}),Object(U.jsx)(L.a.Caption,{children:Object(U.jsx)("h3",{className:"caption",children:"Explore a city"})})]})]})}),Object(U.jsxs)("div",{className:"text-center m-5",children:[Object(U.jsx)("h1",{className:"brand text-white",children:" Trip Share"}),Object(U.jsxs)("p",{className:"brand text-white",children:[Object(U.jsx)("br",{}),'"Not until we are lost do we begin to understand ourselves."',Object(U.jsx)("br",{}),"-Henry David Thoreau"]})]})]})}}]),s}(a.Component),A=s(34),E=s(12),F=new(function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,[{key:"createUser",value:function(e){return console.log("service "+e.firstName),S.a.post("http://localhost:8085/registration",e)}},{key:"deleteUser",value:function(){return console.log(localStorage.getItem("jwtToken")),S.a.post("http://localhost:8085/user/delete",{},{headers:{Authorization:localStorage.jwtToken}})}}]),e}()),R=s(206),H=s(198),W=s(184),q=s(102),Y=s(185),J=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).initialState={firstName:"",lastName:"",email:"",password:""},a.userChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.resetRegisterForm=function(){a.setState((function(){return a.initialState}))},a.state=a.initialState,a.userChange=a.userChange.bind(Object(E.a)(a)),a.submitUser=a.submitUser.bind(Object(E.a)(a)),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){localStorage.removeItem("newtripId"),localStorage.removeItem("jwtToken")}},{key:"submitUser",value:function(e){var t=this;e.preventDefault();var s={firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,password:this.state.password};console.log("user => "+JSON.stringify(s)),F.createUser(s).then((function(e){t.props.history.push("/login")}))}},{key:"render",value:function(){var e=this.state,t=e.firstName,s=e.email,a=e.password,c=e.lastName;return Object(U.jsx)(o.a,{className:"justify-content-md-center mt-2",children:Object(U.jsx)(l.a,{xs:5,children:Object(U.jsxs)(R.a,{className:"border border-dark bg-dark text-white",children:[Object(U.jsx)(R.a.Header,{className:"mb-3 mt-3",children:Object(U.jsxs)("h2",{children:[Object(U.jsx)(g.a,{icon:v.h})," Register"]})}),Object(U.jsxs)(R.a.Body,{className:" mb-3 mt-3",children:[Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{className:"mb-3 ",children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.g})})}),Object(U.jsx)(q.a,{autoComplete:"off",type:"text",size:"md",name:"firstName",value:t,onChange:this.userChange,className:"bg-white text-dark",placeholder:"Enter First Name"})]})})}),Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{className:"mb-3 ",children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.g})})}),Object(U.jsx)(q.a,{autoComplete:"off",type:"text",name:"lastName",size:"md",value:c,onChange:this.userChange,className:"bg-white text-dark",placeholder:"Enter Last Name"})]})})}),Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{className:"mb-3 ",children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.a})})}),Object(U.jsx)(q.a,{required:!0,autoComplete:"off",type:"email",name:"email",value:s,size:"md",onChange:this.userChange,className:"bg-white text-dark",placeholder:"Enter Email Address"})]})})}),Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.c})})}),Object(U.jsx)(q.a,{required:!0,autoComplete:"off",type:"password",name:"password",size:"md",value:a,onChange:this.userChange,className:"bg-white text-dark",placeholder:"Enter Password"})]})})})]}),Object(U.jsxs)(R.a.Footer,{style:{textAlign:"right"},children:[Object(U.jsxs)(Y.a,{size:"md",type:"button",variant:"success",onClick:this.submitUser,disabled:0===this.state.email.length||0===this.state.password.length,children:[Object(U.jsx)(g.a,{icon:v.h})," Register"]})," ",Object(U.jsxs)(Y.a,{size:"md",type:"button",variant:"info",onClick:this.resetRegisterForm,children:[Object(U.jsx)(g.a,{icon:v.f})," Reset"]})]})]})})})}}]),s}(a.Component),V=s(204),Q=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).initialState={email:"",password:"",error:""},a.credentialChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.validateUser=function(){a.props.authenticateUser(a.state.email,a.state.password),setTimeout((function(){if(a.props.auth.isLoggedIn)return a.props.history.push("/dashboard");a.resetLoginForm(),localStorage.removeItem("jwtToken"),a.setState({error:"Invalid email and password"})}),5e3)},a.resetLoginForm=function(){a.setState((function(){return a.initialState})),localStorage.removeItem("jwtToken"),localStorage.removeItem("newtripId")},a.state=a.initialState,a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){delete localStorage.jwtToken}},{key:"render",value:function(){var e=this.state,t=e.email,s=e.password,a=e.error;return Object(U.jsx)(o.a,{className:"justify-content-md-center mt-2",children:Object(U.jsxs)(l.a,{xs:5,children:[a&&Object(U.jsx)(V.a,{variant:"danger",children:a}),Object(U.jsxs)(R.a,{className:"transparent border-dark bg-dark text-white",children:[Object(U.jsx)(R.a.Header,{className:"mb-3 mt-3",children:Object(U.jsxs)("h2",{children:[Object(U.jsx)(g.a,{icon:v.d})," Login"]})}),Object(U.jsxs)(R.a.Body,{className:" mb-3 mt-3",children:[Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{className:"mb-3 ",children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.a})})}),Object(U.jsx)(q.a,{required:!0,autoComplete:"off",type:"text",name:"email",size:"md",value:t,onChange:this.credentialChange,className:"bg-white text-dark",placeholder:"Enter Email Address"})]})})}),Object(U.jsx)(H.a.Row,{children:Object(U.jsx)(H.a.Group,{as:l.a,children:Object(U.jsxs)(W.a,{children:[Object(U.jsx)(W.a.Prepend,{children:Object(U.jsx)(W.a.Text,{children:Object(U.jsx)(g.a,{icon:v.c})})}),Object(U.jsx)(q.a,{required:!0,autoComplete:"off",type:"password",name:"password",size:"md",value:s,onChange:this.credentialChange,className:"bg-white text-dark",placeholder:"Enter Password"})]})})})]}),Object(U.jsxs)(R.a.Footer,{style:{textAlign:"right"},children:[Object(U.jsxs)(Y.a,{className:"mb-1 mt-1",size:"md",type:"button",variant:"success",onClick:this.validateUser,disabled:0===this.state.email.length||0===this.state.password.length,children:[Object(U.jsx)(g.a,{icon:v.d})," Login"]})," ",Object(U.jsxs)(Y.a,{size:"md",type:"button",variant:"info",onClick:this.resetLoginForm,disabled:0===this.state.email.length&&0===this.state.password.length&&0===this.state.error.length,children:[Object(U.jsx)(g.a,{icon:v.f})," Reset"]})]})]})]})})}}]),s}(a.Component),_=Object(x.b)((function(e){return{auth:e.auth}}),(function(e){return{authenticateUser:function(t,s){return e(function(e,t){var s={email:e,password:t};return console.log(e),console.log(t),function(e){e({type:N}),S.a.post("http://localhost:8085/user/authenticate",s).then((function(t){console.log(JSON.stringify(t));var s=t.data.token;localStorage.setItem("jwtToken",s),e(T(!0))})).catch((function(t){e(I())}))}}(t,s))}}}))(Q),$=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e,a){var c;return Object(h.a)(this,s),(c=t.call(this,e,a)).findUserByUser=function(){fetch("http://localhost:8085/user/getdetails",{method:"get",headers:new Headers({Authorization:localStorage.jwtToken,"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e),c.setState({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,dob:e.dob,description:e.description,photoPath:e.photoPath}),1===e.gender?c.setState({gender:"Male"}):0===e.gender?c.setState({gender:"Other"}):2===e.gender&&c.setState({gender:"Female"})}))},c.findTripsByUser=function(){fetch("http://localhost:8085/user/gettrips",{method:"get",headers:new Headers({Authorization:localStorage.jwtToken,"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e[0]),c.setState({trip:e[0],test:e.length}),console.log(c.state.test)}))},c.getChatUsers=function(){fetch("http://localhost:8085/user/getchatslist",{method:"get",headers:new Headers({Authorization:localStorage.jwtToken,"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e),c.setState({firstChatUser:e[0]})}))},c.state={id:"",firstName:"",lastName:"",email:"",dob:"",description:"",gender:"",photoPath:null,trip:null,test:"",firstChatUser:null},c.editProfile=c.editProfile.bind(Object(E.a)(c)),c.createTrip=c.createTrip.bind(Object(E.a)(c)),c.deleteProfile=c.deleteProfile.bind(Object(E.a)(c)),c.changePhoto=c.changePhoto.bind(Object(E.a)(c)),c.myTrips=c.myTrips.bind(Object(E.a)(c)),c.myChats=c.myChats.bind(Object(E.a)(c)),localStorage.removeItem("newtripId"),c}return Object(b.a)(s,[{key:"componentDidMount",value:function(){this.findUserByUser(),this.findTripsByUser(),this.getChatUsers()}},{key:"editProfile",value:function(){return this.props.history.push("/editProfile")}},{key:"createTrip",value:function(){return this.props.history.push("/createtrip")}},{key:"deleteProfile",value:function(){return this.props.history.push("/deleteProfile")}},{key:"myTrips",value:function(){return this.props.history.push("/myTrips")}},{key:"myChats",value:function(){return this.props.history.push("/chatUi/"+this.state.id)}},{key:"changePhoto",value:function(){return localStorage.setItem("photoPath",this.state.photoPath),this.props.history.push("/changePhoto")}},{key:"render",value:function(){var e,t,s=this.state,a=s.firstName,c=s.lastName,n=s.email,r=s.gender,i=s.description,o=s.dob,l=s.photoPath,d=s.trip,j=s.firstChatUser,h=null===l;return e=s.test?Object(U.jsxs)("div",{children:[Object(U.jsx)("i",{children:"Latest Trip"}),Object(U.jsx)("div",{className:"text-dark block-example border border-info w-100 p-2",children:Object(U.jsxs)("small",{children:["Description:",d.description,Object(U.jsx)("br",{}),"Location: ",d.destination," | ","Budget: ",d.tripBudget,Object(U.jsx)("br",{}),"Group Size: ",d.groupSize," | ","Date: ",d.tripDate]})}),Object(U.jsx)("small",{children:"To see all the information click on button below..."}),Object(U.jsx)("br",{}),Object(U.jsxs)(Y.a,{className:"text-center",onClick:this.myTrips,children:[" ","view all"]})]}):Object(U.jsxs)("div",{className:"text-white text-center bg-info block-example border border-danger w-100 p-2",children:["There are no previous trips to display.",Object(U.jsx)("br",{})," Click on Create Trip Button to create new. trips."]}),t=j?Object(U.jsxs)("div",{children:[Object(U.jsx)("i",{children:"You have a message from:"}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{className:"text-dark block-example border border-info w-100 p-2",children:Object(U.jsx)("small",{children:Object(U.jsxs)("li",{children:[j.firstName," ",j.lastName]})})}),Object(U.jsx)("br",{}),Object(U.jsxs)(Y.a,{size:"sm",className:"text-center",onClick:this.myChats,children:[" ","View other messages"]})]}):Object(U.jsx)("div",{className:"text-white text-center bg-info block-example border border-danger w-100 p-2",children:"There are no messages."}),Object(U.jsx)("div",{className:"container",children:Object(U.jsx)("div",{className:"main-body",children:Object(U.jsxs)("div",{className:"row gutters-sm",children:[Object(U.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(U.jsx)("div",{className:"card",children:Object(U.jsx)("div",{className:"card-body",children:Object(U.jsxs)("div",{className:"d-flex flex-column align-items-center text-center",children:[h?Object(U.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar7.png",alt:"No path",className:"rounded-circle",width:"150"}):Object(U.jsx)("img",{src:"http://localhost:8085/userphotos/"+l,alt:"No preview",className:"rounded-circle",width:"150"}),Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsx)("h4",{children:a+" "+c}),Object(U.jsx)("p",{className:"text-secondary mb-3",children:i}),Object(U.jsx)("button",{className:"btn btn-primary",onClick:this.changePhoto,children:"Change Photo"})]})]})})}),Object(U.jsx)("div",{className:"card mt-3",children:Object(U.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(U.jsx)("li",{className:"list-group-item text-center",children:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("style",{type:"text/css",children:"\n                      .btn-flat {\n                        background-color: black;\n                        color: white;\n                      }\n\n                      .btn-xxl {\n                        left: 1rem;\n                        font-size: 1rem;\n                      }\n                      "}),Object(U.jsx)(Y.a,{variant:"flat",size:"xxl1",onClick:this.editProfile,children:"Edit Profile"})]})}),Object(U.jsx)("li",{className:"list-group-item text-center",children:Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Y.a,{variant:"flat",size:"xxl1",onClick:this.createTrip,children:"Trip Preferences"})})}),Object(U.jsx)("li",{className:"list-group-item text-center",children:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("style",{type:"text/css",children:"\n                      .btn-flat1 {\n                        background-color: red;\n                        color: white;\n                      }\n\n                      .btn-xxl1 {\n                        left: 1rem;\n                        font-size: 1rem;\n                      }\n                      "}),Object(U.jsx)(Y.a,{variant:"flat1",size:"xxl1",onClick:this.deleteProfile,children:"Delete Account"})]})})]})})]}),Object(U.jsxs)("div",{className:"col-md-8",children:[Object(U.jsx)("div",{className:"card mb-3",children:Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-sm-3",children:Object(U.jsx)("h6",{className:"mb-0",children:"Full Name"})}),Object(U.jsx)("div",{className:"col-sm-9 text-secondary",children:a+" "+c})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-sm-3",children:Object(U.jsx)("h6",{className:"mb-0",children:"Email"})}),Object(U.jsx)("div",{className:"col-sm-9 text-secondary",children:n})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-sm-3",children:Object(U.jsx)("h6",{className:"mb-0",children:"Gender"})}),Object(U.jsx)("div",{className:"col-sm-9 text-secondary",children:r})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-sm-3",children:Object(U.jsx)("h6",{className:"mb-0",children:"Date of Birth"})}),Object(U.jsx)("div",{className:"col-sm-9 text-secondary",children:o})]}),Object(U.jsx)("hr",{})]})}),Object(U.jsxs)("div",{className:"row gutters-sm",children:[Object(U.jsx)("div",{className:"col-sm-6 mb-3",children:Object(U.jsx)("div",{className:"card h-100",children:Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsx)("h6",{className:"d-flex align-items-center mb-3",children:Object(U.jsx)("i",{className:"material-icons text-info mr-2",children:"Chat Messages"})}),t]})})}),Object(U.jsx)("div",{className:"col-sm-6 mb-3",children:Object(U.jsx)("div",{className:"card h-100",children:Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsx)("h6",{className:"d-flex align-items-center mb-3",children:Object(U.jsx)("i",{className:"material-icons text-info mr-2",children:"My Trips"})}),e]})})})]})]})]})})})}}]),s}(a.Component),K=s(103),X=s.n(K),Z=new(function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,[{key:"saveUser",value:function(e){return console.log(e),S.a.post("http://localhost:8085/user/updatedetails",e,{headers:{Authorization:localStorage.jwtToken,"Content-Type":"application/json"}})}},{key:"savePhoto",value:function(e){var t=new X.a;t.append("image",e);var s={method:"post",url:"http://localhost:8085/user/savephoto",headers:{Authorization:localStorage.jwtToken},data:t};return S()(s)}}]),e}()),ee=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).initialState={firstName:"",lastName:"",email:"",dob:"",description:"",gender:"",password:""},a.findUserByUser=function(){fetch("http://localhost:8085/user/getdetails",{method:"get",headers:new Headers({Authorization:localStorage.jwtToken,"Content-Type":"application / json"})}).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({firstName:e.firstName,lastName:e.lastName,email:e.email,gender:e.gender,dob:e.dob,description:e.description,password:e.password})}))},a.userChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.state=a.initialState,a.userChange=a.userChange.bind(Object(E.a)(a)),a.updteProfile=a.updteProfile.bind(Object(E.a)(a)),a.cancle=a.cancle.bind(Object(E.a)(a)),localStorage.removeItem("newtripId"),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){this.findUserByUser()}},{key:"cancle",value:function(){return this.props.history.push("/dashboard")}},{key:"updteProfile",value:function(e){var t=this;e.preventDefault();var s={firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,gender:this.state.gender,dob:this.state.dob,description:this.state.description,password:this.state.password};console.log("updated user => "+JSON.stringify(s)),Z.saveUser(s).then((function(e){return console.log(e.data),t.setState({firstName:s.firstName,lastName:s.lastName,email:s.email,gender:s.gender,dob:s.dob,description:s.description,password:s.password}),t.props.history.push("/dashboard")}))}},{key:"render",value:function(){var e=this.state,t=e.firstName,s=e.email,a=e.lastName,c=e.description,n=e.dob,r=e.gender,i=e.password;return Object(U.jsx)("div",{children:Object(U.jsx)("div",{className:"container",children:Object(U.jsx)("div",{className:"row gutters",children:Object(U.jsx)("div",{className:"card h-100",children:Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsxs)("div",{className:"row gutters",children:[Object(U.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:Object(U.jsx)("h3",{className:"mb-3 text-primary",children:"Update Profile"})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"First Name"}),Object(U.jsx)("input",{style:{"background-color":"#3CBC8D",color:"white"},autoComplete:"off",type:"text",className:"form-control bg-white text-dark",name:"firstName",id:"firstName",value:t,onChange:this.userChange,placeholder:"Enter first name"})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Last Name"}),Object(U.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",name:"lastName",id:"lastName",value:a,onChange:this.userChange,placeholder:"Enter last name"})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Email"}),Object(U.jsx)("input",{autoComplete:"off",type:"email",className:"form-control",name:"email",id:"email",value:s,disabled:!0})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Description"}),Object(U.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",name:"description",id:"description",value:c,onChange:this.userChange,placeholder:"Enter Description"})]})})]}),Object(U.jsxs)("div",{className:"row gutters",children:[Object(U.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Gender"}),Object(U.jsxs)("select",{autoComplete:"off",type:"name",className:"form-control",name:"gender",id:"gender",value:r,onChange:this.userChange,placeholder:"Enter Gender",children:[Object(U.jsx)("option",{value:"",defaultValue:!0,disabled:!0,hidden:!0,children:"Choose Gender"}),Object(U.jsx)("option",{value:"1",children:"Male"}),Object(U.jsx)("option",{value:"2",children:"Female"}),Object(U.jsx)("option",{value:"0",children:"Other"})]})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Date of Birth"}),Object(U.jsx)("input",{autoComplete:"off",type:"date",className:"form-control",name:"dob",id:"dob",value:n,onChange:this.userChange,placeholder:"Enter Date of Birth"})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Address"}),Object(U.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",name:"address",id:"address",placeholder:"Enter Address"})]})}),Object(U.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12",children:Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Password"}),Object(U.jsx)("input",{autoComplete:"off",type:"password",className:"form-control",name:"password",id:"password",value:i,onChange:this.userChange,placeholder:"Password"})]})})]}),Object(U.jsx)("div",{className:"row gutters",children:Object(U.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:Object(U.jsxs)("div",{className:"text-right",children:[Object(U.jsx)("button",{type:"button",id:"submit",name:"submit",onClick:this.cancle,className:"btn btn-secondary",children:"Cancel"})," ",Object(U.jsx)("button",{type:"button",id:"submit",name:"submit",onClick:this.updteProfile,className:"btn btn-primary",children:"Update"})]})})})]})})})})})}}]),s}(a.Component),te=new(function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,[{key:"saveTrip",value:function(e){return console.log(e),S.a.post("http://localhost:8085/user/createtrip",e,{headers:{Authorization:localStorage.jwtToken,"Content-Type":"application/json"}})}},{key:"GetmatchTrip",value:function(e){return console.log(e),S.a.get("http://localhost:8085/user/matchtrips/"+e,{headers:{Authorization:localStorage.jwtToken}})}}]),e}()),se=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).userChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.submitTrip=function(e){e.preventDefault();var t={destination:a.state.destination,landscape:a.state.landscape,tripDate:a.state.tripDate,tripLength:a.state.tripLength,tripBudget:a.state.tripBudget,groupSize:a.state.groupSize,expectedAgeGroup:a.state.expectedAgeGroup,expectedGender:a.state.expectedGender,description:a.state.description};console.log(t),te.saveTrip(t).then((function(e){console.log(e.data.tripId);var t=e.data.tripId;localStorage.setItem("tripId",t),a.props.history.push("/newMatch")}))},a.state={destination:"",landscape:"",tripDate:"",tripLength:"",tripBudget:"",groupSize:"",expectedAgeGroup:"",expectedGender:"",description:""},a.userChange=a.userChange.bind(Object(E.a)(a)),a.submitTrip=a.submitTrip.bind(Object(E.a)(a)),localStorage.removeItem("newtripId"),a}return Object(b.a)(s,[{key:"render",value:function(){var e=this.state,t=e.destination,s=e.tripDate,a=e.tripLength,c=e.tripBudget,n=e.groupSize,r=e.description;return Object(U.jsx)("div",{children:Object(U.jsx)(H.a,{children:Object(U.jsx)(o.a,{className:"justify-content-md-center",children:Object(U.jsx)(l.a,{xs:7,children:Object(U.jsxs)(R.a,{className:"border border-dark bg-dark text-white",children:[Object(U.jsx)(R.a.Header,{className:"mb-2 mt-2",children:Object(U.jsxs)("h2",{children:[Object(U.jsx)(g.a,{icon:v.h})," Trip Preferences"]})}),Object(U.jsxs)(R.a.Body,{children:[Object(U.jsxs)(H.a.Group,{controlId:"formGridDestination",children:[Object(U.jsx)(H.a.Label,{children:"Destination"}),Object(U.jsx)(H.a.Control,{autoComplete:"off",type:"text",placeholder:"Enter Destination",name:"destination",value:t,onChange:this.userChange})]}),Object(U.jsxs)(H.a.Group,{controlId:"formGridLandscape",children:[Object(U.jsx)(H.a.Label,{children:"Landscape"}),Object(U.jsxs)(H.a.Control,{as:"select",defaultValue:"Choose Landsape...",name:"landscape",onChange:this.userChange,children:[Object(U.jsx)("option",{value:"-1",children:"Choose Landscape..."}),Object(U.jsx)("option",{value:"0",children:"Any"}),Object(U.jsx)("option",{value:"1",children:"Mountain/Hilly"}),Object(U.jsx)("option",{value:"2",children:"Beach"}),Object(U.jsx)("option",{value:"3",children:"Snowy"}),Object(U.jsx)("option",{value:"4",children:"Other"})]})]}),Object(U.jsxs)(H.a.Group,{controlId:"formGridDate",children:[Object(U.jsx)(H.a.Label,{children:"Travel Date"}),Object(U.jsx)(H.a.Control,{type:"date",name:"tripDate",value:s,onChange:this.userChange})]}),Object(U.jsxs)(H.a.Group,{controlId:"formGridTripLength",children:[Object(U.jsx)(H.a.Label,{children:"Trip Length"}),Object(U.jsx)(H.a.Control,{autoComplete:"off",placeholder:"Enter no. of days",name:"tripLength",value:a,onChange:this.userChange})]}),Object(U.jsxs)(H.a.Row,{children:[Object(U.jsxs)(H.a.Group,{as:l.a,controlId:"formGridBudget",children:[Object(U.jsx)(H.a.Label,{children:"Trip Budget"}),Object(U.jsx)(H.a.Control,{autoComplete:"off",placeholder:"Enter your budget",name:"tripBudget",value:c,onChange:this.userChange})]}),Object(U.jsxs)(H.a.Group,{as:l.a,controlId:"formGridGroup",children:[Object(U.jsx)(H.a.Label,{children:"Group Size(approx)"}),Object(U.jsx)(H.a.Control,{autoComplete:"off",placeholder:"Your group size",name:"groupSize",value:n,onChange:this.userChange})]})]}),Object(U.jsxs)(H.a.Row,{children:[Object(U.jsx)(l.a,{xs:6,children:Object(U.jsxs)(H.a.Group,{controlId:"formGridAge",children:[Object(U.jsx)(H.a.Label,{children:"Preferred Age Group"}),Object(U.jsxs)(H.a.Control,{as:"select",defaultValue:"Choose...",name:"expectedAgeGroup",onChange:this.userChange,children:[Object(U.jsx)("option",{value:"-1",children:"Choose..."}),Object(U.jsx)("option",{value:"0",children:"Upto 20 years"}),Object(U.jsx)("option",{value:"1",children:"20-30"}),Object(U.jsx)("option",{value:"3",children:"30-40"}),Object(U.jsx)("option",{value:"4",children:"40-50"}),Object(U.jsx)("option",{value:"5",children:"50+"})]})]})}),Object(U.jsxs)(H.a.Group,{as:l.a,children:[Object(U.jsx)(H.a.Label,{children:"Preferred Gender"}),Object(U.jsxs)(l.a,{sm:10,children:[Object(U.jsx)(H.a.Check,{type:"radio",label:"Any",name:"expectedGender",id:"anyradio",value:"0",onChange:this.userChange}),Object(U.jsx)(H.a.Check,{type:"radio",label:"Male",name:"expectedGender",id:"maleradio",value:"1",onChange:this.userChange}),Object(U.jsx)(H.a.Check,{type:"radio",label:"Female",name:"expectedGender",id:"femaleradio",value:"2",onChange:this.userChange})]})]})]}),Object(U.jsxs)(H.a.Group,{controlId:"formGridDescription",children:[Object(U.jsx)(H.a.Label,{children:"Description"}),Object(U.jsx)(H.a.Control,{autoComplete:"off",type:"textarea",rows:"9",placeholder:"Your expectations here...",name:"description",value:r,onChange:this.userChange})]})]}),Object(U.jsx)(R.a.Footer,{style:{textAlign:"left"},children:Object(U.jsx)(Y.a,{variant:"primary",type:"submit",onClick:this.submitTrip,children:"Find Me Some Fellow Travellers"})})]})})})})})}}]),s}(a.Component),ae=s(106),ce=s(186),ne=s(207);function re(e,t){var s=window.getComputedStyle(e);return t.reduce((function(e,t){return e[t]=s[t],e}),{})}function ie(e,t){var s=t.duration,a=t.direction,c=t.onComplete,n={marginTop:"0px",marginBottom:"0px",height:"0px"},r=Object.keys(n),i="DOWN"===a?[n,re(e,r)]:[re(e,r),n],o=Object(ae.a)(i,2),l=o[0],d=o[1],j=new Map(r.map((function(e){return[e,Object(ne.a)(l[e],d[e])]})));return function(e){var t=e.onProgress,s=e.onComplete,a=e.duration,c=e.initialProgress,n=null,r=null,i=(c||0)*a;return r=window.requestAnimationFrame((function e(c){n||(n=c-i);var o=(c-n)/a;o>1&&(o=1),t(o),o<1?r=window.requestAnimationFrame(e):s&&s()})),{stop:function(){cancelAnimationFrame(r)}}}({duration:s,onComplete:c,onProgress:function(t){var s=Object(ce.a)(t);j.forEach((function(t,a){e.style[a]=t(s)}))}})}var oe=new(function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,[{key:"sendMessage",value:function(e){return S.a.post("http://localhost:8085/user/savemessage",e,{headers:{Authorization:localStorage.jwtToken,"Content-Type":"application/json"}})}},{key:"getChatUsers",value:function(){return S.a.get("http://localhost:8085/user/getchatslist",{headers:{Authorization:localStorage.jwtToken}})}},{key:"getChats",value:function(e){return S.a.get("http://localhost:8085/user/getchats/"+e,{headers:{Authorization:localStorage.jwtToken}})}}]),e}()),le=s(201),de=s(197),je=s(205),he=s(195),be=s(193),me=s(194),ue=s(192),xe=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).toggleExpander=function(e){"checkbox"!==e.target.type&&(a.state.expanded?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.duration,a=void 0===s?750:s,c=t.onComplete;ie(e,{direction:"UP",duration:a,onComplete:c})}(a.refs.expanderBody,{onComplete:function(){a.setState({expanded:!1})}}):a.setState({expanded:!0},(function(){a.refs.expanderBody&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.duration,a=void 0===s?750:s,c=t.onComplete;ie(e,{direction:"DOWN",duration:a,onComplete:c})}(a.refs.expanderBody)})))},a.handleChange=function(e){a.setState((function(){return{messageobj:{toUserId:a.props.trip.user.id,message:e}}}))},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.sendMsg=function(e){if(e.preventDefault(),""!==a.state.messageobj.message){var t={toUserId:a.state.messageobj.toUserId,message:a.state.messageobj.message};console.log(a.state.messageobj),console.log(t),oe.sendMessage(t).then((function(e){console.log(e),a.handleClose()}))}},a.state={expanded:!1,open:!1,messageobj:{toUserId:"",message:""}},a}return Object(b.a)(s,[{key:"render",value:function(){var e,t=this,s=this.props.trip,a=this.state.open;return e=1===s.user.gender?"Male":2===s.user.gender?"Female":0===s.user.gender?"Other":"Not Defined",[Object(U.jsxs)("tr",{onClick:this.toggleExpander,children:[Object(U.jsxs)("td",{children:[s.destination,Object(U.jsx)("br",{})]}),Object(U.jsx)("td",{children:s.tripDate}),Object(U.jsxs)("td",{children:[s.user.firstName," ",s.user.lastName]})]},"main"),this.state.expanded&&Object(U.jsx)("tr",{className:"expandable bg-dark",children:Object(U.jsx)("td",{className:"uk-background-muted text-white",colSpan:6,children:Object(U.jsxs)("div",{ref:"expanderBody",className:"inner uk-grid text-white",children:[Object(U.jsx)("div",{className:"uk-width-1-4 uk-text-center text-white"}),Object(U.jsx)(i.a,{children:Object(U.jsxs)(o.a,{children:[Object(U.jsxs)(l.a,{children:[Object(U.jsx)("h3",{children:"Trip Details:"}),Object(U.jsx)("div",{className:"text-white block-example border border-secondary w-50 p-2",children:Object(U.jsxs)("p",{children:["Description:",Object(U.jsx)("br",{}),Object(U.jsxs)("i",{children:[" ",s.description]})]})}),Object(U.jsxs)("p",{children:["Travel Budget: ",s.tripBudget,Object(U.jsx)("br",{}),"Trip Length: ",s.tripLength,Object(U.jsx)("br",{}),"Group Size: ",s.groupSize]})]}),Object(U.jsxs)(l.a,{children:[Object(U.jsx)("h3",{children:"Host Details:"}),Object(U.jsxs)("p",{children:["Host name:"," ",Object(U.jsxs)("i",{children:[s.user.firstName," ",s.user.lastName]}),Object(U.jsx)("br",{}),"Host Date of Birth: ",Object(U.jsx)("i",{children:s.user.dob})," ",Object(U.jsx)("br",{}),"Host gender:",Object(U.jsxs)("i",{children:[" ",e]})]}),Object(U.jsxs)("div",{children:[Object(U.jsxs)(le.a,{variant:"outlined",color:"secondary",onClick:this.handleClickOpen,children:["Have a conversation"," "]}),Object(U.jsxs)(je.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(U.jsx)(ue.a,{id:"form-dialog-title",children:"Message box"}),Object(U.jsxs)(be.a,{children:[Object(U.jsxs)(me.a,{children:["Write a message to ",Object(U.jsx)("i",{children:s.user.firstName}),"."]}),Object(U.jsx)(de.a,{autoFocus:!0,margin:"dense",id:"outlined-multiline-static",placeholder:"Hey There!",label:"Message",multiline:!0,rows:4,variant:"outlined",fullWidth:!0,onChange:function(e){return t.handleChange(e.target.value)},name:"message"})]}),Object(U.jsxs)(he.a,{children:[Object(U.jsx)(le.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(U.jsx)(le.a,{onClick:this.sendMsg,color:"primary",children:"Send"})]})]})]})]})]})})]})})},"tr-expander")]}}]),s}(c.a.Component),pe=s(196),Oe=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).state={tripId:localStorage.getItem("tripId"),trips:null},a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.tripId),te.GetmatchTrip(this.state.tripId).then((function(t){console.log(t.data),e.setState({trips:t.data}),console.log(e.state.trips[0].trip.tripId)})),localStorage.removeItem("tripId")}},{key:"render",value:function(){var e=null===this.state.trips;return Object(U.jsx)("div",{children:Object(U.jsxs)(R.a,{className:"border border-dark bg-secondary text-white",children:[Object(U.jsx)(R.a.Header,{children:Object(U.jsxs)("div",{style:{float:"left"},children:[Object(U.jsx)(g.a,{icon:v.b})," Trip List"]})}),Object(U.jsx)("div",{className:"uk-overflow-auto",children:Object(U.jsx)(R.a.Body,{children:Object(U.jsxs)(pe.a,{bordered:!0,hover:!0,striped:!0,variant:"dark",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"Destination"}),Object(U.jsx)("th",{children:"Date"}),Object(U.jsx)("th",{children:'"Trip Host'})]})}),Object(U.jsx)("tbody",{children:e?Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:6,className:"uk-text-center text-white",children:Object(U.jsx)("em",{className:"uk-text-muted text-white",children:"No Matches Available"})})}):this.state.trips.map((function(e){return Object(U.jsx)(xe,{trip:e.trip},e.trip.tripId)}))})]})})})]})})}}]),s}(a.Component),ge=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e,a){var c;return Object(h.a)(this,s),(c=t.call(this,e,a)).deleteaccount=function(){return F.deleteUser().then((function(e){console.log(e.data)})),localStorage.removeItem("jwtToken"),c.props.history.push("/")},c.deleteaccount=c.deleteaccount.bind(Object(E.a)(c)),c.backtoDashboardService=c.backtoDashboardService.bind(Object(E.a)(c)),c}return Object(b.a)(s,[{key:"backtoDashboardService",value:function(){return this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(U.jsxs)("div",{children:[" ",Object(U.jsx)("br",{}),Object(U.jsxs)("div",{className:"card col-md-6 offset-md-3",children:[Object(U.jsxs)("h3",{className:"text-center text-danger",children:[" ","Delete Account Permanently!!!"]}),Object(U.jsxs)("div",{className:"card-body text-center",children:[Object(U.jsx)("p",{children:"Deleting this account will remove all your personal information, your trips information and chats permanently."}),Object(U.jsx)("br",{}),Object(U.jsx)("p",{children:"Are you sure you want to continue??"}),Object(U.jsxs)("button",{style:{marginLeft:"10px"},onClick:this.backtoDashboardService,className:"btn btn-info",children:["No, take me back"," "]}),Object(U.jsxs)("button",{style:{marginLeft:"10px"},onClick:this.deleteaccount,className:"btn btn-danger",children:["Yes, delete my account"," "]})]})]})]})}}]),s}(a.Component),fe=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).state={file:"http://localhost:8085/userphotos/"+localStorage.getItem("photoPath"),data:""},localStorage.removeItem("photoPath"),a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.backtoDashboardService=a.backtoDashboardService.bind(Object(E.a)(a)),a.changePhoto=a.changePhoto.bind(Object(E.a)(a)),a}return Object(b.a)(s,[{key:"handleChange",value:function(e){var t=document.getElementById("image").files;(new FormData).append("image",t[0]),this.setState({file:URL.createObjectURL(e.target.files[0]),data:t[0]})}},{key:"changePhoto",value:function(){var e=this;Z.savePhoto(this.state.data).then((function(t){return console.log(t.data),e.props.history.push("/dashboard")}))}},{key:"backtoDashboardService",value:function(){return this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(U.jsxs)("div",{children:[" ",Object(U.jsx)("br",{}),Object(U.jsxs)("div",{className:"card col-md-6 offset-md-3",children:[Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("h3",{className:"text-center text-dark",children:" Change Your Profile Photo"}),Object(U.jsxs)("div",{className:"card-body text-center",children:[Object(U.jsx)("input",{type:"file",name:"image",accept:".jpg",id:"image",onChange:this.handleChange}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("img",{src:this.state.file,className:"rounded-circle",width:"150",alt:"No Preview"}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsxs)("button",{style:{marginLeft:"10px"},onClick:this.changePhoto,className:"btn btn-info",children:["Change Photo"," "]}),Object(U.jsxs)("button",{style:{marginLeft:"10px"},onClick:this.backtoDashboardService,className:"btn btn-danger",children:["Cancel"," "]})]})]})]})}}]),s}(a.Component),ve=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).refreshChat=function(){oe.getChats(a.state.currChatUser.id).then((function(e){a.setState({chatMessages:e.data},console.log(e.data[0].fromUser.id))})),console.log("curr user -> "+a.state.currUserId)},a.showUserChat=function(e){var t=e.firstName+" "+e.lastName,s=e.id;document.getElementById("otherUserName").innerHTML=t,a.setState({messageobj:{toUserId:s,message:""},currChatUser:{id:s,name:t}},(function(){console.log(a.state.messageobj),console.log(a.state.currChatUser)}),oe.getChats(e.id).then((function(e){a.setState({chatMessages:e.data},console.log(e.data[0].fromUser.id))})).then((function(){console.log(a.state.chatMessages),console.log(a.state.chatMessages[0].fromUser.id)}))),console.log("curr user -> "+a.state.currUserId)},a.handleChange=function(e){a.setState((function(){return{messageobj:{toUserId:a.state.messageobj.toUserId,message:e}}}))},a.handleClose=function(){a.setState({open:!1})},a.sendMsg=function(e){if(e.preventDefault(),""!==a.state.messageobj.message){a.state.messageobj.toUserId,a.state.messageobj.message;console.log(a.state.messageobj),oe.sendMessage(a.state.messageobj).then((function(e){console.log(e),document.getElementById("chatBox").value="",a.refreshChat()}))}},a.state={currUserId:a.props.match.params.id,currChatUser:{id:"",name:""},messageobj:{toUserId:"",message:""},chatUsers:[],chatMessages:[]},a.showUserChat=a.showUserChat.bind(Object(E.a)(a)),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var e=this;oe.getChatUsers().then((function(t){console.log(t.data),e.setState({chatUsers:t.data,isDemoChat:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.chatUsers,a=t.chatMessages;return Object(U.jsx)("div",{children:Object(U.jsx)("div",{className:"container",children:Object(U.jsx)("div",{className:"main-body",children:Object(U.jsxs)("div",{className:"row gutters-sm",children:[Object(U.jsx)("div",{className:"col-md-5 mb-3",children:Object(U.jsx)("div",{className:"card",children:Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsx)("h4",{className:"mb-4",children:"My Messages"}),Object(U.jsxs)("p",{className:"text-secondary mb-4 ",children:["People who tried to contact you-"," "]})]})}),s.map((function(t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-sm-8",children:Object(U.jsx)("h6",{className:"mb-0",children:Object(U.jsxs)("i",{className:"material-icons text-info mr-2",children:[t.firstName," ",t.lastName]})})}),Object(U.jsx)(Y.a,{variant:"primary",size:"sm",onClick:function(){e.showUserChat(t)},children:"Messages"})]}),Object(U.jsx)("hr",{})]},t.id)}))]})})}),Object(U.jsx)("div",{className:"chat col-md-7",children:Object(U.jsx)("div",{className:"card mb-6",children:Object(U.jsxs)("div",{className:"card-body",id:"chatsdisplay",children:[Object(U.jsx)("div",{className:"row",children:Object(U.jsx)("div",{className:"col-lg-8",children:Object(U.jsx)("h5",{className:"mb-4",children:Object(U.jsx)("i",{className:"material-icons text-info mr-2",id:"otherUserName",children:"Please select a user to see messages."})})})}),a.map((function(t){return Object(U.jsx)("div",{children:e.state.currUserId===t.fromUser.id?Object(U.jsxs)("div",{className:"row",children:[" ",Object(U.jsx)("div",{className:"col-6",children:" "}),Object(U.jsxs)("div",{className:"col-6 text-right",children:[Object(U.jsx)(R.a,{bg:"info",text:"light",children:Object(U.jsx)(R.a.Body,{children:t.message})}),Object(U.jsxs)("h6",{className:"mb-0 col-sm text-secondary",children:["You"," "]})]})]}):Object(U.jsxs)("div",{className:"row",children:[" ",Object(U.jsxs)("div",{className:"col-6 text-left",children:[Object(U.jsx)(R.a,{bg:"primary",text:"light",children:Object(U.jsx)(R.a.Body,{children:t.message})}),Object(U.jsxs)("h6",{className:"mb-0 col-sm text-secondary",children:["User"," "]})]}),Object(U.jsx)("div",{className:"col-6 text-right"})]})},t.msgTimestamp)})),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"row",children:Object(U.jsx)("div",{className:"col",children:Object(U.jsx)(de.a,{autoFocus:!0,margin:"dense",id:"chatBox",placeholder:"Message ",label:"Write a message here",multiline:!0,rows:1,variant:"outlined",fullWidth:!0,onChange:function(t){return e.handleChange(t.target.value)},name:"message"})})}),Object(U.jsx)("div",{className:"text-right",children:Object(U.jsx)(Y.a,{variant:"primary",size:"sm",onClick:this.sendMsg,children:"Send"})})]})})})]})})})})}}]),s}(a.Component),Ne=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).state={trips:null},a.deleteTrip=a.deleteTrip.bind(Object(E.a)(a)),a.myMatches=a.myMatches.bind(Object(E.a)(a)),a}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8085/user/gettrips",{method:"get",headers:new Headers({Authorization:localStorage.jwtToken,"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({trips:t})}))}},{key:"myMatches",value:function(e){console.log(e),localStorage.setItem("tripId",e),this.props.history.push("/newMatch")}},{key:"deleteTrip",value:function(e){console.log(e),S.a.post("http://localhost:8085/user/deletetrip/"+e,{headers:{Authorization:localStorage.jwtToken}})}},{key:"render",value:function(){var e=this,t=null===this.state.trips;return Object(U.jsxs)("div",{children:[Object(U.jsx)("h2",{className:"text-center text-white",children:"My Trip's List"}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{className:"row",children:Object(U.jsxs)("table",{className:"table table-striped table-bordered text-white text-center border border-dark bg-dark",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:" Description"}),Object(U.jsx)("th",{children:" Destination"}),Object(U.jsx)("th",{children:" Budget"}),Object(U.jsx)("th",{children:" Group Size"}),Object(U.jsx)("th",{children:" Date"}),Object(U.jsx)("th",{children:" Actions"})]})}),Object(U.jsx)("tbody",{children:t?Object(U.jsx)("tr",{children:Object(U.jsx)("td",{colSpan:7,className:"uk-text-center text-white",children:Object(U.jsx)("em",{className:"uk-text-muted text-white",children:"No trips to display"})})}):this.state.trips.map((function(t){return Object(U.jsxs)("tr",{children:[Object(U.jsxs)("td",{children:[" ",t.description," "]}),Object(U.jsxs)("td",{children:[" ",t.destination]}),Object(U.jsxs)("td",{children:[" ",t.tripBudget]}),Object(U.jsxs)("td",{children:[" ",t.groupSize]}),Object(U.jsxs)("td",{children:[" ",t.tripDate," "]}),Object(U.jsxs)("td",{children:[Object(U.jsxs)("button",{onClick:function(){return e.myMatches(t.tripId)},className:"btn btn-info",children:["View Matches"," "]}),Object(U.jsxs)("button",{style:{marginLeft:"10px"},onClick:function(){return e.deleteTrip(t.tripId)},className:"btn btn-danger",children:["Delete"," "]})]})]},t.tripId)}))})]})})]})}}]),s}(a.Component),ye=function(e){Object(m.a)(s,e);var t=Object(u.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return Object(U.jsxs)("div",{children:[Object(U.jsx)("h1",{className:"text-center text-white mb-5",children:"Developers"}),Object(U.jsx)("div",{children:Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("div",{className:"row gutters-lg",children:[Object(U.jsx)("div",{className:"col-md-4 mb-3 text-center text-dark",children:Object(U.jsx)("div",{className:"card",children:Object(U.jsx)("div",{className:"card-body",children:Object(U.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsx)("h3",{className:"mb-3",children:"Rishabh Tyagi"})," ",Object(U.jsx)("p",{children:"MT2020019"}),Object(U.jsxs)("p",{children:["International Institute of Information Technology, Bangalore"," "]})]})})})})}),Object(U.jsxs)("div",{className:"col-md-4 mb-3 text-center text-dark",children:[Object(U.jsx)("div",{className:"card",children:Object(U.jsx)("div",{className:"card-body",children:Object(U.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsx)("h3",{className:"mb-3",children:"Rushi Shah"})," ",Object(U.jsx)("p",{children:"MT2020113"}),Object(U.jsxs)("p",{children:["International Institute of Information Technology, Bangalore"," "]})]})})})})," "]}),Object(U.jsxs)("div",{className:"col-md-4 mb-3 text-center text-dark",children:[Object(U.jsx)("div",{className:"card",children:Object(U.jsx)("div",{className:"card-body",children:Object(U.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsx)("h3",{className:"mb-3",children:"Nayan Chaturvedi"})," ",Object(U.jsx)("p",{children:"MT2020114 "}),Object(U.jsxs)("p",{children:["International Institute of Information Technology, Bangalore"," "]})]})})})})," "]})]})})})]})}}]),s}(a.Component);function Ce(){return Object(U.jsxs)(d.a,{children:[Object(U.jsx)(D,{}),Object(U.jsx)(i.a,{children:Object(U.jsx)(o.a,{children:Object(U.jsx)(l.a,{lg:12,className:"margin-top",children:Object(U.jsxs)(j.c,{children:[Object(U.jsx)(j.a,{path:"/",exact:!0,component:B}),Object(U.jsx)(j.a,{path:"/register",exact:!0,component:J}),Object(U.jsx)(j.a,{path:"/login",exact:!0,component:_}),Object(U.jsx)(j.a,{path:"/dashboard",exact:!0,component:$}),Object(U.jsx)(j.a,{path:"/editProfile",exact:!0,component:ee}),Object(U.jsx)(j.a,{path:"/createtrip",exact:!0,component:se}),Object(U.jsx)(j.a,{path:"/newMatch",exact:!0,component:Oe}),Object(U.jsx)(j.a,{path:"/deleteProfile",exact:!0,component:ge}),Object(U.jsx)(j.a,{path:"/changePhoto",exact:!0,component:fe}),Object(U.jsx)(j.a,{path:"/chatUi/:id",exact:!0,component:ve}),Object(U.jsx)(j.a,{path:"/myTrips",exact:!0,component:Ne}),Object(U.jsx)(j.a,{path:"/aboutUs",exact:!0,component:ye})]})})})})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=s(53),ke=s(104),Se=s(105),Te={isLoggedIn:""},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:case y:return Object(Se.a)({},e);case C:case w:return{isLoggedIn:t.payload};default:return e}},Ue=Object(we.c)({auth:Ie});var Pe,De=Object(we.d)(Ue,Object(we.a)(ke.a));localStorage.jwtToken&&((Pe=localStorage.jwtToken)?S.a.defaults.headers.common.Authorization="".concat(Pe):delete S.a.defaults.headers.common.Authorization);var Le=De;r.a.render(Object(U.jsx)(x.a,{store:Le,children:Object(U.jsx)(Ce,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,s){},87:function(e,t,s){}},[[148,1,2]]]);
//# sourceMappingURL=main.a19d72cc.chunk.js.map